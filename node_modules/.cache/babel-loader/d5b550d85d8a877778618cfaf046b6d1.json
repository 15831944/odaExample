{"ast":null,"code":"var _jsxFileName = \"/Users/yutianjian/test/oda/src/viewer/DraggerComponent/DraggerComponent.js\";\nimport { Component } from \"react\";\nimport { SubscribeSubjectContext } from \"../../utils/SubscribeSubjectContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultState = {\n  is3D: false,\n  activeDraggerName: \"Pan\",\n  hasViewPointToSave: false,\n  isEnable: false,\n  cuttingChoose: false,\n  isSupportViewPoint: true\n};\nexport class DraggerComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...defaultState\n    };\n\n    this.activateDraggerByName = (name, hasViewPointToSave) => {\n      this.eventsConnection.onActivateDraggerByName.next(name);\n      this.setState({\n        activeDraggerName: name,\n        hasViewPointToSave: hasViewPointToSave\n      });\n    };\n\n    this.toggle = name => () => this.setState({\n      [name]: !this.state[name]\n    });\n\n    this.onPan = () => this.activateDraggerByName(\"Pan\");\n\n    this.onOrbit = () => this.activateDraggerByName(\"Orbit\");\n\n    this.onZoom = () => this.activateDraggerByName(\"Zoom\");\n\n    this.onMeasuring = () => this.activateDraggerByName(\"MeasureLine\");\n\n    this.onSlicePlaneX = () => {\n      this.activateDraggerByName(\"CuttingPlaneXAxis\", true);\n      this.setState({\n        activeDraggerName: \"Cutting\"\n      });\n      this.toggle(\"cuttingChoose\")();\n    };\n\n    this.onSlicePlaneY = () => {\n      this.activateDraggerByName(\"CuttingPlaneYAxis\");\n      this.setState({\n        activeDraggerName: \"Cutting\"\n      });\n      this.toggle(\"cuttingChoose\")();\n      this.setState({\n        hasViewPointToSave: true\n      });\n    };\n\n    this.onSlicePlaneZ = () => {\n      this.activateDraggerByName(\"CuttingPlaneZAxis\");\n      this.setState({\n        activeDraggerName: \"Cutting\"\n      });\n      this.toggle(\"cuttingChoose\")();\n      this.setState({\n        hasViewPointToSave: true\n      });\n    };\n\n    this.onDrawLine = () => this.activateDraggerByName(\"Line\", true);\n\n    this.onDrawText = () => this.activateDraggerByName(\"Text\", true);\n\n    this.onSave = () => {\n      this.eventsConnection.onSaveViewPoint.next();\n    };\n\n    this.onClearViewer = () => {\n      this.eventsConnection.onClearViewPoint.next();\n      this.onPan();\n      this.setState({\n        hasViewPointToSave: false\n      });\n    };\n\n    this.onWalk = () => {\n      this.onClearViewer();\n      this.activateDraggerByName(\"Walk\", true);\n    };\n\n    this.eventsConnection = props.eventsConnection;\n    this.subscribeSubjectContext = new SubscribeSubjectContext();\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeInitialization, () => {\n      this.onClearViewer();\n      this.setState({ ...defaultState\n      });\n    });\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.change3dMode, is3D => {\n      if (is3D === false) {\n        this.onPan();\n      } else if (is3D === true) {\n        this.onOrbit();\n      }\n\n      this.setState({\n        is3D\n      });\n    });\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeEnable, isEnable => this.setState({\n      isEnable\n    }));\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeSupportViewPoint, isSupportViewPoint => this.setState({\n      isSupportViewPoint\n    }));\n  }\n\n  componentWillUnmount() {\n    this.subscribeSubjectContext.unsubscribe();\n  }\n\n  render() {\n    const {\n      is3D,\n      activeDraggerName,\n      hasViewPointToSave,\n      isEnable,\n      cuttingChoose,\n      isSupportViewPoint\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          zIndex: 4,\n          position: \"absolute\",\n          bottom: \"1%\",\n          display: \"flex\",\n          width: \"100%\",\n          justifyContent: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-1\",\n          style: {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            gap: \"0.2em\",\n            border: \"1px solid #F6F6F6\",\n            boxSizing: \"border-box\",\n            background: \"#FFFFFF\",\n            boxShadow: \"0px 0px 4px rgba(0, 0, 0, 0.25)\",\n            justifyContent: \"center\",\n            padding: \"0.1em\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onPan,\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Pan\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/pan.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), \"Pan\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), is3D ? /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onOrbit,\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Orbit\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/orbit.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this), \"Orbit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onZoom,\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Zoom\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/zoom_window.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), \"Zoom\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onMeasuring,\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Measuring\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/ruler.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), \"Ruler\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), is3D ? /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onWalk,\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Walk\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"material-icons\",\n              style: {\n                fontSize: \"34px\",\n                color: \"#05093B\"\n              },\n              children: \"directions_walk\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), \"Walk\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.toggle(\"cuttingChoose\"),\n            className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Cutting\" ? \"active-dragger\" : \"\"),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/cutting.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this), \"Cutting\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onClearViewer,\n            className: \"btn btn-outline-secondary d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/clear.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), \"Clear\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), isSupportViewPoint ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !isEnable,\n              type: \"button\",\n              onClick: this.onDrawLine,\n              className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Line\" ? \"active-dragger\" : \"\"),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"icons/pen.svg\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), \"Pen\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !isEnable,\n              type: \"button\",\n              onClick: this.onDrawText,\n              className: \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Text\" ? \"active-dragger\" : \"\"),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"icons/text.svg\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), \"Text\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !hasViewPointToSave,\n              type: \"button\",\n              onClick: this.onSave,\n              className: \"btn btn-outline-secondary d-flex flex-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"icons/save_viewpoint.svg\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), \"Save\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), cuttingChoose ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          bottom: \"85px\",\n          display: \"flex\",\n          width: \"100%\",\n          justifyContent: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-1\",\n          style: {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            gap: \"0.2em\",\n            border: \"1px solid #F6F6F6\",\n            boxSizing: \"border-box\",\n            background: \"#FFFFFF\",\n            boxShadow: \"0px 0px 4px rgba(0, 0, 0, 0.25)\",\n            justifyContent: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onSlicePlaneX,\n            className: \"btn btn-outline-secondary d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/cutting_x.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this), \"X\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onSlicePlaneY,\n            className: \"btn btn-outline-secondary d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/cutting_y.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), \"Y\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !isEnable,\n            type: \"button\",\n            onClick: this.onSlicePlaneZ,\n            className: \"btn btn-outline-secondary d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"icons/cutting_z.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this), \"Z\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/yutianjian/test/oda/src/viewer/DraggerComponent/DraggerComponent.js"],"names":["Component","SubscribeSubjectContext","defaultState","is3D","activeDraggerName","hasViewPointToSave","isEnable","cuttingChoose","isSupportViewPoint","DraggerComponent","constructor","props","state","activateDraggerByName","name","eventsConnection","onActivateDraggerByName","next","setState","toggle","onPan","onOrbit","onZoom","onMeasuring","onSlicePlaneX","onSlicePlaneY","onSlicePlaneZ","onDrawLine","onDrawText","onSave","onSaveViewPoint","onClearViewer","onClearViewPoint","onWalk","subscribeSubjectContext","subscribe","changeInitialization","change3dMode","changeEnable","changeSupportViewPoint","componentWillUnmount","unsubscribe","render","zIndex","position","bottom","display","width","justifyContent","flexWrap","gap","border","boxSizing","background","boxShadow","padding","fontSize","color"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport { SubscribeSubjectContext } from \"../../utils/SubscribeSubjectContext\";\n\nconst defaultState = {\n  is3D: false,\n  activeDraggerName: \"Pan\",\n  hasViewPointToSave: false,\n  isEnable: false,\n  cuttingChoose: false,\n  isSupportViewPoint: true,\n};\n\nexport class DraggerComponent extends Component {\n  state = { ...defaultState };\n\n  constructor(props) {\n    super(props);\n    this.eventsConnection = props.eventsConnection;\n    this.subscribeSubjectContext = new SubscribeSubjectContext();\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeInitialization, () => {\n      this.onClearViewer();\n      this.setState({ ...defaultState });\n    });\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.change3dMode, (is3D) => {\n      if (is3D === false) {\n        this.onPan();\n      } else if (is3D === true) {\n        this.onOrbit();\n      }\n      this.setState({ is3D });\n    });\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeEnable, (isEnable) =>\n      this.setState({ isEnable })\n    );\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.changeSupportViewPoint, (isSupportViewPoint) =>\n      this.setState({ isSupportViewPoint })\n    );\n  }\n\n  componentWillUnmount() {\n    this.subscribeSubjectContext.unsubscribe();\n  }\n\n  activateDraggerByName = (name, hasViewPointToSave) => {\n    this.eventsConnection.onActivateDraggerByName.next(name);\n    this.setState({\n      activeDraggerName: name,\n      hasViewPointToSave: hasViewPointToSave,\n    });\n  };\n\n  toggle = (name) => () => this.setState({ [name]: !this.state[name] });\n\n  onPan = () => this.activateDraggerByName(\"Pan\");\n\n  onOrbit = () => this.activateDraggerByName(\"Orbit\");\n\n  onZoom = () => this.activateDraggerByName(\"Zoom\");\n\n  onMeasuring = () => this.activateDraggerByName(\"MeasureLine\");\n\n  onSlicePlaneX = () => {\n    this.activateDraggerByName(\"CuttingPlaneXAxis\", true);\n    this.setState({ activeDraggerName: \"Cutting\" });\n    this.toggle(\"cuttingChoose\")();\n  };\n\n  onSlicePlaneY = () => {\n    this.activateDraggerByName(\"CuttingPlaneYAxis\");\n    this.setState({ activeDraggerName: \"Cutting\" });\n    this.toggle(\"cuttingChoose\")();\n    this.setState({ hasViewPointToSave: true });\n  };\n\n  onSlicePlaneZ = () => {\n    this.activateDraggerByName(\"CuttingPlaneZAxis\");\n    this.setState({ activeDraggerName: \"Cutting\" });\n    this.toggle(\"cuttingChoose\")();\n    this.setState({ hasViewPointToSave: true });\n  };\n\n  onDrawLine = () => this.activateDraggerByName(\"Line\", true);\n\n  onDrawText = () => this.activateDraggerByName(\"Text\", true);\n\n  onSave = () => {\n    this.eventsConnection.onSaveViewPoint.next();\n  };\n\n  onClearViewer = () => {\n    this.eventsConnection.onClearViewPoint.next();\n    this.onPan();\n    this.setState({ hasViewPointToSave: false });\n  };\n\n  onWalk = () => {\n    this.onClearViewer();\n    this.activateDraggerByName(\"Walk\", true);\n  };\n\n  render() {\n    const { is3D, activeDraggerName, hasViewPointToSave, isEnable, cuttingChoose, isSupportViewPoint } = this.state;\n\n    return (\n      <div>\n        <div\n          style={{\n            zIndex: 4,\n            position: \"absolute\",\n            bottom: \"1%\",\n            display: \"flex\",\n            width: \"100%\",\n            justifyContent: \"center\",\n          }}\n        >\n          <div\n            className=\"p-1\"\n            style={{\n              display: \"flex\",\n              flexWrap: \"wrap\",\n              gap: \"0.2em\",\n              border: \"1px solid #F6F6F6\",\n              boxSizing: \"border-box\",\n              background: \"#FFFFFF\",\n              boxShadow: \"0px 0px 4px rgba(0, 0, 0, 0.25)\",\n              justifyContent: \"center\",\n              padding: \"0.1em\",\n            }}\n          >\n            <button\n              disabled={!isEnable}\n              type=\"button\"\n              onClick={this.onPan}\n              className={\n                \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Pan\" ? \"active-dragger\" : \"\")\n              }\n            >\n              <img src=\"icons/pan.svg\" alt=\"\" />\n              Pan\n            </button>\n            {is3D ? (\n              <button\n                disabled={!isEnable}\n                type=\"button\"\n                onClick={this.onOrbit}\n                className={\n                  \"btn btn-outline-secondary d-flex flex-column \" +\n                  (activeDraggerName === \"Orbit\" ? \"active-dragger\" : \"\")\n                }\n              >\n                <img src=\"icons/orbit.svg\" alt=\"\" />\n                Orbit\n              </button>\n            ) : null}\n            <button\n              disabled={!isEnable}\n              type=\"button\"\n              onClick={this.onZoom}\n              className={\n                \"btn btn-outline-secondary d-flex flex-column \" + (activeDraggerName === \"Zoom\" ? \"active-dragger\" : \"\")\n              }\n            >\n              <img src=\"icons/zoom_window.svg\" alt=\"\" />\n              Zoom\n            </button>\n            <button\n              disabled={!isEnable}\n              type=\"button\"\n              onClick={this.onMeasuring}\n              className={\n                \"btn btn-outline-secondary d-flex flex-column \" +\n                (activeDraggerName === \"Measuring\" ? \"active-dragger\" : \"\")\n              }\n            >\n              <img src=\"icons/ruler.svg\" alt=\"\" />\n              Ruler\n            </button>\n            {is3D ? (\n              <button\n                disabled={!isEnable}\n                type=\"button\"\n                onClick={this.onWalk}\n                className={\n                  \"btn btn-outline-secondary d-flex flex-column \" +\n                  (activeDraggerName === \"Walk\" ? \"active-dragger\" : \"\")\n                }\n              >\n                <span className=\"material-icons\" style={{ fontSize: \"34px\", color: \"#05093B\" }}>\n                  directions_walk\n                </span>\n                Walk\n              </button>\n            ) : null}\n            <button\n              disabled={!isEnable}\n              type=\"button\"\n              onClick={this.toggle(\"cuttingChoose\")}\n              className={\n                \"btn btn-outline-secondary d-flex flex-column \" +\n                (activeDraggerName === \"Cutting\" ? \"active-dragger\" : \"\")\n              }\n            >\n              <img src=\"icons/cutting.svg\" alt=\"\" />\n              Cutting\n            </button>\n\n            <button\n              disabled={!isEnable}\n              type=\"button\"\n              onClick={this.onClearViewer}\n              className=\"btn btn-outline-secondary d-flex flex-column\"\n            >\n              <img src=\"icons/clear.svg\" alt=\"\" />\n              Clear\n            </button>\n            {isSupportViewPoint ? (\n              <>\n                <button\n                  disabled={!isEnable}\n                  type=\"button\"\n                  onClick={this.onDrawLine}\n                  className={\n                    \"btn btn-outline-secondary d-flex flex-column \" +\n                    (activeDraggerName === \"Line\" ? \"active-dragger\" : \"\")\n                  }\n                >\n                  <img src=\"icons/pen.svg\" alt=\"\" />\n                  Pen\n                </button>\n                <button\n                  disabled={!isEnable}\n                  type=\"button\"\n                  onClick={this.onDrawText}\n                  className={\n                    \"btn btn-outline-secondary d-flex flex-column \" +\n                    (activeDraggerName === \"Text\" ? \"active-dragger\" : \"\")\n                  }\n                >\n                  <img src=\"icons/text.svg\" alt=\"\" />\n                  Text\n                </button>\n                <button\n                  disabled={!hasViewPointToSave}\n                  type=\"button\"\n                  onClick={this.onSave}\n                  className=\"btn btn-outline-secondary d-flex flex-column\"\n                >\n                  <img src=\"icons/save_viewpoint.svg\" alt=\"\" />\n                  Save\n                </button>\n              </>\n            ) : null}\n          </div>\n        </div>\n\n        {cuttingChoose ? (\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: \"85px\",\n              display: \"flex\",\n              width: \"100%\",\n              justifyContent: \"center\",\n            }}\n          >\n            <div\n              className=\"p-1\"\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \"0.2em\",\n                border: \"1px solid #F6F6F6\",\n                boxSizing: \"border-box\",\n                background: \"#FFFFFF\",\n                boxShadow: \"0px 0px 4px rgba(0, 0, 0, 0.25)\",\n                justifyContent: \"center\",\n              }}\n            >\n              <button\n                disabled={!isEnable}\n                type=\"button\"\n                onClick={this.onSlicePlaneX}\n                className=\"btn btn-outline-secondary d-flex flex-column\"\n              >\n                <img src=\"icons/cutting_x.svg\" alt=\"\" />X\n              </button>\n              <button\n                disabled={!isEnable}\n                type=\"button\"\n                onClick={this.onSlicePlaneY}\n                className=\"btn btn-outline-secondary d-flex flex-column\"\n              >\n                <img src=\"icons/cutting_y.svg\" alt=\"\" />Y\n              </button>\n              <button\n                disabled={!isEnable}\n                type=\"button\"\n                onClick={this.onSlicePlaneZ}\n                className=\"btn btn-outline-secondary d-flex flex-column\"\n              >\n                <img src=\"icons/cutting_z.svg\" alt=\"\" />Z\n              </button>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}