{"ast":null,"code":"var _jsxFileName = \"/Users/yutianjian/test/oda/src/components/DrawingReference.js\";\n///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport propTypes from \"prop-types\";\nimport Window from \"./Window\";\nimport UploadButton from \"./UploadButton\";\nimport { DragnDrop } from \"../components/DragnDrop\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DrawingReference extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      refs: []\n    };\n    this.windowStyle = {\n      left: \"calc(50% - 300px)\",\n      top: \"calc(50% - 265px)\",\n      width: \"600px\",\n      height: \"530px\"\n    };\n    this.title = \"Set references\";\n    this.supportFormat = [\"ttf\", \"ttc\", \"otf\", \"shx\"];\n    this.acceptFormat = this.supportFormat.map(value => \".\" + value).join(\",\");\n    this.references = [];\n\n    this.onCloseHandler = () => {\n      if (this.props.onReject) {\n        this.props.onReject();\n      }\n    };\n\n    this.addReference = refFile => {\n      if (!this.state.refs.find(element => element === refFile.name)) {\n        this.state.refs.push(refFile.name);\n        this.references.push(refFile);\n        this.setState({\n          refs: this.state.refs\n        });\n      }\n    };\n\n    this.onSelectHandler = filesList => {\n      for (let file of filesList) {\n        this.addReference(file);\n      }\n    };\n\n    this.onRemove = index => {\n      this.references.splice(index);\n      this.setState({\n        refs: this.state.refs.filter((_, i) => i !== index)\n      });\n    };\n\n    this.onDropHandler = ev => {\n      ev.preventDefault();\n\n      if (this.props.onResolve && ev.dataTransfer.files.length !== 0) {\n        this.addReference(ev.dataTransfer.files[0]);\n      }\n    };\n\n    this.onSubmits = () => {\n      if (this.props.onResolve) {\n        this.props.onResolve(this.references);\n        this.references = [];\n      }\n    };\n  }\n\n  render() {\n    const supportFormats = this.supportFormat.join(\" ,\");\n    const refsList = this.state.refs.map((name, index) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: [name, /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"icons/remove.svg\",\n          style: {\n            cursor: \"pointer\",\n            float: \"right\"\n          },\n          width: \"25px\",\n          height: \"25px\",\n          alt: \"...\",\n          onClick: () => this.onRemove(index)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(Window, {\n      className: \"object-explorer\",\n      title: this.title,\n      resizable: false,\n      style: this.windowStyle,\n      onClose: this.onCloseHandler,\n      children: [/*#__PURE__*/_jsxDEV(DragnDrop, {\n        onDrop: this.onDropHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), this.state.refs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        onDragOver: e => e.preventDefault(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"icons/reference.svg\",\n          alt: \"\",\n          width: \"300px\",\n          height: \"300px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        onDragOver: e => e.preventDefault(),\n        style: {\n          height: \"300px\",\n          overflowY: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group\",\n          style: {\n            width: \"100%\"\n          },\n          children: refsList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        style: {\n          marginBottom: \"5px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(UploadButton, {\n          btnText: \" or drag it here.\",\n          accept: this.acceptFormat,\n          onSelect: this.onSelectHandler,\n          multiple: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        style: {\n          color: \"#05093B\"\n        },\n        children: [\"Supported format: \", supportFormats]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        style: {\n          padding: \"10px\",\n          color: \"#05093B\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-default button-upload-file d-flex align-items-center\",\n          style: {\n            paddingLeft: \"20px\",\n            paddingRight: \"20px\"\n          },\n          onClick: this.onSubmits,\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nDrawingReference.propTypes = {\n  onResolve: propTypes.func,\n  onReject: propTypes.func\n};\nexport default DrawingReference;","map":{"version":3,"sources":["/Users/yutianjian/test/oda/src/components/DrawingReference.js"],"names":["React","Component","propTypes","Window","UploadButton","DragnDrop","DrawingReference","state","refs","windowStyle","left","top","width","height","title","supportFormat","acceptFormat","map","value","join","references","onCloseHandler","props","onReject","addReference","refFile","find","element","name","push","setState","onSelectHandler","filesList","file","onRemove","index","splice","filter","_","i","onDropHandler","ev","preventDefault","onResolve","dataTransfer","files","length","onSubmits","render","supportFormats","refsList","cursor","float","e","overflowY","marginBottom","color","padding","paddingLeft","paddingRight","func"],"mappings":"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","sourcesContent":["///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport propTypes from \"prop-types\";\n\nimport Window from \"./Window\";\nimport UploadButton from \"./UploadButton\";\nimport { DragnDrop } from \"../components/DragnDrop\";\n\nclass DrawingReference extends Component {\n  state = {\n    refs: [],\n  };\n\n  windowStyle = {\n    left: \"calc(50% - 300px)\",\n    top: \"calc(50% - 265px)\",\n    width: \"600px\",\n    height: \"530px\",\n  };\n\n  title = \"Set references\";\n\n  supportFormat = [\"ttf\", \"ttc\", \"otf\", \"shx\"];\n\n  acceptFormat = this.supportFormat.map((value) => \".\" + value).join(\",\");\n\n  references = [];\n\n  onCloseHandler = () => {\n    if (this.props.onReject) {\n      this.props.onReject();\n    }\n  };\n\n  addReference = (refFile) => {\n    if (!this.state.refs.find((element) => element === refFile.name)) {\n      this.state.refs.push(refFile.name);\n      this.references.push(refFile);\n      this.setState({ refs: this.state.refs });\n    }\n  };\n\n  onSelectHandler = (filesList) => {\n    for (let file of filesList) {\n      this.addReference(file);\n    }\n  };\n\n  onRemove = (index) => {\n    this.references.splice(index);\n    this.setState({ refs: this.state.refs.filter((_, i) => i !== index) });\n  };\n\n  onDropHandler = (ev) => {\n    ev.preventDefault();\n    if (this.props.onResolve && ev.dataTransfer.files.length !== 0) {\n      this.addReference(ev.dataTransfer.files[0]);\n    }\n  };\n\n  onSubmits = () => {\n    if (this.props.onResolve) {\n      this.props.onResolve(this.references);\n      this.references = [];\n    }\n  };\n\n  render() {\n    const supportFormats = this.supportFormat.join(\" ,\");\n\n    const refsList = this.state.refs.map((name, index) => {\n      return (\n        <li className=\"list-group-item\" key={index}>\n          {name}\n          <img\n            src=\"icons/remove.svg\"\n            style={{ cursor: \"pointer\", float: \"right\" }}\n            width=\"25px\"\n            height=\"25px\"\n            alt=\"...\"\n            onClick={() => this.onRemove(index)}\n          ></img>\n        </li>\n      );\n    });\n\n    return (\n      <Window\n        className=\"object-explorer\"\n        title={this.title}\n        resizable={false}\n        style={this.windowStyle}\n        onClose={this.onCloseHandler}\n      >\n        <DragnDrop onDrop={this.onDropHandler} />\n\n        {this.state.refs.length === 0 ? (\n          <div className=\"d-flex flex-row justify-content-center\" onDragOver={(e) => e.preventDefault()}>\n            <img src=\"icons/reference.svg\" alt=\"\" width=\"300px\" height=\"300px\"></img>\n          </div>\n        ) : (\n          <div\n            className=\"d-flex flex-row justify-content-center\"\n            onDragOver={(e) => e.preventDefault()}\n            style={{ height: \"300px\", overflowY: \"auto\" }}\n          >\n            <ul className=\"list-group\" style={{ width: \"100%\" }}>\n              {refsList}\n            </ul>\n          </div>\n        )}\n\n        <div className=\"d-flex flex-row justify-content-center\" style={{ marginBottom: \"5px\" }}>\n          <UploadButton\n            btnText={\" or drag it here.\"}\n            accept={this.acceptFormat}\n            onSelect={this.onSelectHandler}\n            multiple={true}\n          ></UploadButton>\n        </div>\n        <div className=\"d-flex flex-row justify-content-center\" style={{ color: \"#05093B\" }}>\n          Supported format: {supportFormats}\n        </div>\n\n        <div className=\"d-flex flex-row justify-content-center\" style={{ padding: \"10px\", color: \"#05093B\" }}>\n          <button\n            type=\"button\"\n            className=\"btn btn-default button-upload-file d-flex align-items-center\"\n            style={{ paddingLeft: \"20px\", paddingRight: \"20px\" }}\n            onClick={this.onSubmits}\n          >\n            Upload\n          </button>\n        </div>\n      </Window>\n    );\n  }\n}\n\nDrawingReference.propTypes = {\n  onResolve: propTypes.func,\n  onReject: propTypes.func,\n};\n\nexport default DrawingReference;\n"]},"metadata":{},"sourceType":"module"}