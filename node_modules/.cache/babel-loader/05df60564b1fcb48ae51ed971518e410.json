{"ast":null,"code":"var _jsxFileName = \"/Users/yutianjian/test/oda/src/viewer/PropertiesComponent/PropertiesComponent.js\";\n///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport Window from \"../../components/Window\";\nimport { SpinnerWithText } from \"../../components/SpinnerWithText\";\nimport { SubscribeSubjectContext } from \"../../utils/SubscribeSubjectContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultState = {\n  isLoading: false,\n  properties: {},\n  error: null\n};\nexport class PropertiesComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...defaultState\n    };\n    this.eventsConnection = props.eventsConnection;\n    this.subscribeSubjectContext = new SubscribeSubjectContext();\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.loadingProperties, isLoading => this.setState({\n      isLoading,\n      properties: {},\n      error: null\n    }));\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.completeLoadProperties, properties => this.setState({\n      isLoading: false,\n      properties: properties,\n      error: null\n    }));\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.errorLoadProperties, error => this.setState({\n      isLoading: false,\n      properties: {},\n      error: error\n    }));\n  }\n\n  componentWillUnmount() {\n    this.subscribeSubjectContext.unsubscribe();\n  }\n\n  renderProperties(obj) {\n    const properties = Object.keys(obj).map((name, index) => {\n      let value = typeof obj[name] === \"object\" ? JSON.stringify(obj[name]).replace(/[{}\"]/gi, \"\") : obj[name];\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-striped\",\n      style: {\n        color: \"#05093B\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: properties\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderError(error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col p-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center text-danger\",\n        children: error.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n\n  renderLoading() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(SpinnerWithText, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    const {\n      isLoading,\n      properties,\n      error\n    } = this.state;\n    let content = null;\n\n    if (isLoading) {\n      content = this.renderLoading();\n    } else if (error) {\n      content = this.renderError(error);\n    } else {\n      content = this.renderProperties(properties);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Window, {\n      className: \"properties-explorer\",\n      title: \"Properties\",\n      onClose: () => this.eventsConnection.onClose.next(),\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/yutianjian/test/oda/src/viewer/PropertiesComponent/PropertiesComponent.js"],"names":["React","Component","Window","SpinnerWithText","SubscribeSubjectContext","defaultState","isLoading","properties","error","PropertiesComponent","constructor","props","state","eventsConnection","subscribeSubjectContext","subscribe","loadingProperties","setState","completeLoadProperties","errorLoadProperties","componentWillUnmount","unsubscribe","renderProperties","obj","Object","keys","map","name","index","value","JSON","stringify","replace","color","renderError","message","renderLoading","render","content","onClose","next"],"mappings":"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","sourcesContent":["///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport Window from \"../../components/Window\";\nimport { SpinnerWithText } from \"../../components/SpinnerWithText\";\nimport { SubscribeSubjectContext } from \"../../utils/SubscribeSubjectContext\";\n\nconst defaultState = {\n  isLoading: false,\n  properties: {},\n  error: null,\n};\n\nexport class PropertiesComponent extends Component {\n  state = { ...defaultState };\n\n  constructor(props) {\n    super(props);\n    this.eventsConnection = props.eventsConnection;\n    this.subscribeSubjectContext = new SubscribeSubjectContext();\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.loadingProperties, (isLoading) =>\n      this.setState({ isLoading, properties: {}, error: null })\n    );\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.completeLoadProperties, (properties) =>\n      this.setState({ isLoading: false, properties: properties, error: null })\n    );\n\n    this.subscribeSubjectContext.subscribe(this.eventsConnection.errorLoadProperties, (error) =>\n      this.setState({ isLoading: false, properties: {}, error: error })\n    );\n  }\n\n  componentWillUnmount() {\n    this.subscribeSubjectContext.unsubscribe();\n  }\n\n  renderProperties(obj) {\n    const properties = Object.keys(obj).map((name, index) => {\n      let value = typeof obj[name] === \"object\" ? JSON.stringify(obj[name]).replace(/[{}\"]/gi, \"\") : obj[name];\n      return (\n        <tr key={index}>\n          <td>{name}</td>\n          <td>{value}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <table className=\"table table-striped\" style={{ color: \"#05093B\" }}>\n        <tbody>{properties}</tbody>\n      </table>\n    );\n  }\n\n  renderError(error) {\n    return (\n      <div className=\"col p-2\">\n        <div className=\"d-flex justify-content-center text-danger\">{error.message}</div>\n      </div>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <div className=\"col justify-content-center\">\n        <SpinnerWithText>\n          <span>Loading...</span>\n        </SpinnerWithText>\n      </div>\n    );\n  }\n\n  render() {\n    const { isLoading, properties, error } = this.state;\n\n    let content = null;\n    if (isLoading) {\n      content = this.renderLoading();\n    } else if (error) {\n      content = this.renderError(error);\n    } else {\n      content = this.renderProperties(properties);\n    }\n\n    return (\n      <Window className=\"properties-explorer\" title=\"Properties\" onClose={() => this.eventsConnection.onClose.next()}>\n        {content}\n      </Window>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}