{"ast":null,"code":"var _jsxFileName = \"/Users/yutianjian/test/oda/src/components/CreateDrawing.js\";\n///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport propTypes from \"prop-types\";\nimport Window from \"./Window\";\nimport UploadButton from \"./UploadButton\";\nimport { DragnDrop } from \"../components/DragnDrop\";\nimport \"antd/dist/antd.css\";\nimport { Alert } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WINDOW_STYLE = {\n  left: \"calc(50% - 250px)\",\n  top: \"calc(50% - 225px)\",\n  width: \"550px\",\n  height: \"450px\",\n  maxWidth: \"550px\",\n  maxHeight: \"450px\"\n};\nconst SUPPORT_FORMAT_STYLE = {\n  width: \"50px\",\n  margin: 0,\n  padding: \"4px 8px\",\n  textAlign: \"center\"\n};\n\nclass CreateDrawing extends Component {\n  constructor(props) {\n    super(props);\n    this.title = \"Upload file\";\n    this.state = {\n      isError: false\n    };\n\n    this.checkFileFormat = name => {\n      const ext = name.split(\".\").pop();\n      const upperExt = ext.toUpperCase();\n\n      if (this.supportFormat.indexOf(upperExt) === -1) {\n        this.setState({\n          isError: true\n        });\n        return false;\n      }\n\n      this.setState({\n        isError: false\n      });\n      return true;\n    };\n\n    this.onCloseHandler = () => {\n      if (this.props.onReject) {\n        this.props.onReject();\n      }\n    };\n\n    this.onSelectHandler = filesList => {\n      if (this.props.onResolve && filesList.length !== 0) {\n        this.checkFileFormat(filesList[0].name) && this.props.onResolve(filesList[0]);\n      }\n    };\n\n    this.onDropHandler = ev => {\n      ev.preventDefault();\n\n      if (this.props.onResolve && ev.dataTransfer.files.length !== 0) {\n        this.checkFileFormat(ev.dataTransfer.files[0].name) && this.props.onResolve(ev.dataTransfer.files[0]);\n      }\n    };\n\n    this.supportFormat = this.props.supportFormats;\n    this.acceptFormat = this.supportFormat.map(value => value.toLowerCase()).join(\", \");\n  }\n\n  render() {\n    const supportFormats = this.supportFormat.map((value, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-secondary d-flex\",\n        style: SUPPORT_FORMAT_STYLE,\n        children: value\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(Window, {\n      className: \"object-explorer\",\n      title: this.title,\n      resizable: false,\n      style: WINDOW_STYLE,\n      onClose: this.onCloseHandler,\n      children: [/*#__PURE__*/_jsxDEV(DragnDrop, {\n        onDrop: this.onDropHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        onDragOver: e => e.preventDefault(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"icons/upload.svg\",\n          alt: \"\",\n          width: \"256px\",\n          height: \"256px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row justify-content-center\",\n        style: {\n          marginBottom: \"5px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(UploadButton, {\n          btnText: \" or drag it here.\",\n          onSelect: this.onSelectHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), !this.state.isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row flex-wrap justify-content-between\",\n        style: {\n          color: \"#05093B\",\n          gap: \"8px\",\n          width: \"400px\",\n          margin: \"auto\"\n        },\n        children: supportFormats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n        message: \"Unsupported format\",\n        description: `use ${this.acceptFormat}`,\n        type: \"error\",\n        onClose: () => this.setState({\n          isError: false\n        }),\n        closable: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nCreateDrawing.propTypes = {\n  onResolve: propTypes.func,\n  onReject: propTypes.func\n};\nexport default CreateDrawing;","map":{"version":3,"sources":["/Users/yutianjian/test/oda/src/components/CreateDrawing.js"],"names":["React","Component","propTypes","Window","UploadButton","DragnDrop","Alert","WINDOW_STYLE","left","top","width","height","maxWidth","maxHeight","SUPPORT_FORMAT_STYLE","margin","padding","textAlign","CreateDrawing","constructor","props","title","state","isError","checkFileFormat","name","ext","split","pop","upperExt","toUpperCase","supportFormat","indexOf","setState","onCloseHandler","onReject","onSelectHandler","filesList","onResolve","length","onDropHandler","ev","preventDefault","dataTransfer","files","supportFormats","acceptFormat","map","value","toLowerCase","join","render","index","e","marginBottom","color","gap","func"],"mappings":"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","sourcesContent":["///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport propTypes from \"prop-types\";\n\nimport Window from \"./Window\";\nimport UploadButton from \"./UploadButton\";\nimport { DragnDrop } from \"../components/DragnDrop\";\n\nimport \"antd/dist/antd.css\";\nimport { Alert } from \"antd\";\n\nconst WINDOW_STYLE = {\n  left: \"calc(50% - 250px)\",\n  top: \"calc(50% - 225px)\",\n  width: \"550px\",\n  height: \"450px\",\n  maxWidth: \"550px\",\n  maxHeight: \"450px\",\n};\n\nconst SUPPORT_FORMAT_STYLE = {\n  width: \"50px\",\n  margin: 0,\n  padding: \"4px 8px\",\n  textAlign: \"center\",\n};\n\nclass CreateDrawing extends Component {\n  title = \"Upload file\";\n\n  state = {\n    isError: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.supportFormat = this.props.supportFormats;\n    this.acceptFormat = this.supportFormat.map((value) => value.toLowerCase()).join(\", \");\n  }\n\n  checkFileFormat = (name) => {\n    const ext = name.split(\".\").pop();\n    const upperExt = ext.toUpperCase();\n    if (this.supportFormat.indexOf(upperExt) === -1) {\n      this.setState({ isError: true });\n      return false;\n    }\n    this.setState({ isError: false });\n    return true;\n  };\n\n  onCloseHandler = () => {\n    if (this.props.onReject) {\n      this.props.onReject();\n    }\n  };\n\n  onSelectHandler = (filesList) => {\n    if (this.props.onResolve && filesList.length !== 0) {\n      this.checkFileFormat(filesList[0].name) && this.props.onResolve(filesList[0]);\n    }\n  };\n\n  onDropHandler = (ev) => {\n    ev.preventDefault();\n    if (this.props.onResolve && ev.dataTransfer.files.length !== 0) {\n      this.checkFileFormat(ev.dataTransfer.files[0].name) && this.props.onResolve(ev.dataTransfer.files[0]);\n    }\n  };\n\n  render() {\n    const supportFormats = this.supportFormat.map((value, index) => {\n      return (\n        <div className=\"alert alert-secondary d-flex\" style={SUPPORT_FORMAT_STYLE} key={index}>\n          {value}\n        </div>\n      );\n    });\n\n    return (\n      <Window\n        className=\"object-explorer\"\n        title={this.title}\n        resizable={false}\n        style={WINDOW_STYLE}\n        onClose={this.onCloseHandler}\n      >\n        <DragnDrop onDrop={this.onDropHandler} />\n        <div className=\"d-flex flex-row justify-content-center\" onDragOver={(e) => e.preventDefault()}>\n          <img src=\"icons/upload.svg\" alt=\"\" width=\"256px\" height=\"256px\"></img>\n        </div>\n        <div className=\"d-flex flex-row justify-content-center\" style={{ marginBottom: \"5px\" }}>\n          <UploadButton btnText={\" or drag it here.\"} onSelect={this.onSelectHandler}></UploadButton>\n        </div>\n\n        {!this.state.isError ? (\n          <div\n            className=\"d-flex flex-row flex-wrap justify-content-between\"\n            style={{\n              color: \"#05093B\",\n              gap: \"8px\",\n              width: \"400px\",\n              margin: \"auto\",\n            }}\n          >\n            {supportFormats}\n          </div>\n        ) : (\n          <Alert\n            message=\"Unsupported format\"\n            description={`use ${this.acceptFormat}`}\n            type=\"error\"\n            onClose={() => this.setState({ isError: false })}\n            closable\n          />\n        )}\n      </Window>\n    );\n  }\n}\n\nCreateDrawing.propTypes = {\n  onResolve: propTypes.func,\n  onReject: propTypes.func,\n};\n\nexport default CreateDrawing;\n"]},"metadata":{},"sourceType":"module"}