{"ast":null,"code":"var _jsxFileName = \"/Users/yutianjian/test/oda/src/containers/UserMenu.js\";\n///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { actions } from \"../redux/login\";\nimport { connect } from \"react-redux\";\nimport Window from \"../components/Window\";\nimport ClientFactory from \"./../ClientFactory\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass UserMenu extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      tokenWindow: false,\n      serverVersion: null,\n      serverBuild: null\n    };\n\n    this.closeTokenWindow = () => this.setState({\n      tokenWindow: false\n    });\n\n    this.showTokenWindow = () => this.setState({\n      tokenWindow: true\n    });\n  }\n\n  async componentDidMount() {\n    const data = await ClientFactory.get().version();\n    this.setState({\n      serverVersion: data.version,\n      serverBuild: data.build\n    });\n  }\n\n  render() {\n    console.log(\"this.props\", this.props, this.props.data, this.props.data.user);\n    const user = this.props.data;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dropleft\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cursor-pointer shadow-hover\",\n          \"data-toggle\": \"dropdown\",\n          \"aria-haspopup\": \"true\",\n          \"aria-expanded\": \"false\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-icons\",\n            style: {\n              fontSize: \"38px\"\n            },\n            children: \"account_circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-menu\",\n          \"aria-labelledby\": \"dropdownMenuButton\",\n          style: {\n            boxShadow: \"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)\",\n            borderRadius: \"5px\",\n            border: \"1px solid #eeefff\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-name d-none d-sm-inline dropdown-item\",\n            children: user.name || user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"m-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-item\",\n            onClick: this.props.logout,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"text-dark\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-item\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cursor-pointer\",\n              onClick: this.showTokenWindow,\n              children: \"Token\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"m-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropdown-item text-secondary\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Client: \", process.env.REACT_APP_VERSION, \" - \", new Date(Number(process.env.REACT_APP_BUILD_TIME)).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Server: \", this.state.serverVersion, \" - \", this.state.serverBuild]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), this.state.tokenWindow ? /*#__PURE__*/_jsxDEV(Window, {\n        style: {\n          height: \"min-content\"\n        },\n        title: \"Token\",\n        onClose: this.closeTokenWindow,\n        children: user.data.tokenInfo.token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true);\n  }\n\n}\n\nexport default connect(state => state.login, dispatch => ({\n  logout: () => dispatch(actions.logout())\n}))(UserMenu);","map":{"version":3,"sources":["/Users/yutianjian/test/oda/src/containers/UserMenu.js"],"names":["React","Component","Link","actions","connect","Window","ClientFactory","UserMenu","state","tokenWindow","serverVersion","serverBuild","closeTokenWindow","setState","showTokenWindow","componentDidMount","data","get","version","build","render","console","log","props","user","fontSize","boxShadow","borderRadius","border","name","email","logout","process","env","REACT_APP_VERSION","Date","Number","REACT_APP_BUILD_TIME","toLocaleDateString","height","tokenInfo","token","login","dispatch"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,OAAOC,aAAP,MAA0B,oBAA1B;;;;AAEA,MAAMC,QAAN,SAAuBN,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC/BO,KAD+B,GACvB;AACNC,MAAAA,WAAW,EAAE,KADP;AAENC,MAAAA,aAAa,EAAE,IAFT;AAGNC,MAAAA,WAAW,EAAE;AAHP,KADuB;;AAAA,SAO/BC,gBAP+B,GAOZ,MAAM,KAAKC,QAAL,CAAc;AAAEJ,MAAAA,WAAW,EAAE;AAAf,KAAd,CAPM;;AAAA,SAQ/BK,eAR+B,GAQb,MAAM,KAAKD,QAAL,CAAc;AAAEJ,MAAAA,WAAW,EAAE;AAAf,KAAd,CARO;AAAA;;AAUR,QAAjBM,iBAAiB,GAAG;AACxB,UAAMC,IAAI,GAAG,MAAMV,aAAa,CAACW,GAAd,GAAoBC,OAApB,EAAnB;AACA,SAAKL,QAAL,CAAc;AAAEH,MAAAA,aAAa,EAAEM,IAAI,CAACE,OAAtB;AAA+BP,MAAAA,WAAW,EAAEK,IAAI,CAACG;AAAjD,KAAd;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACPC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAKC,KAA/B,EAAsC,KAAKA,KAAL,CAAWP,IAAjD,EAAuD,KAAKO,KAAL,CAAWP,IAAX,CAAgBQ,IAAvE;AACA,UAAMA,IAAI,GAAG,KAAKD,KAAL,CAAWP,IAAxB;AACA,wBACE;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,gCACE;AACE,UAAA,SAAS,EAAC,6BADZ;AAEE,yBAAY,UAFd;AAGE,2BAAc,MAHhB;AAIE,2BAAc,OAJhB;AAAA,iCAME;AAAM,YAAA,SAAS,EAAC,gBAAhB;AAAiC,YAAA,KAAK,EAAE;AAAES,cAAAA,QAAQ,EAAE;AAAZ,aAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,gBADF,eAWE;AACE,UAAA,SAAS,EAAC,eADZ;AAEE,6BAAgB,oBAFlB;AAGE,UAAA,KAAK,EAAE;AACLC,YAAAA,SAAS,EAAE,0DADN;AAELC,YAAAA,YAAY,EAAE,KAFT;AAGLC,YAAAA,MAAM,EAAE;AAHH,WAHT;AAAA,kCASE;AAAK,YAAA,SAAS,EAAC,4CAAf;AAAA,sBAA6DJ,IAAI,CAACK,IAAL,IAAaL,IAAI,CAACM;AAA/E;AAAA;AAAA;AAAA;AAAA,kBATF,eAUE;AAAI,YAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,kBAVF,eAWE;AAAK,YAAA,SAAS,EAAC,eAAf;AAA+B,YAAA,OAAO,EAAE,KAAKP,KAAL,CAAWQ,MAAnD;AAAA,mCACE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,GAAT;AAAa,cAAA,SAAS,EAAC,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAXF,eAgBE;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAgC,cAAA,OAAO,EAAE,KAAKjB,eAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAhBF,eAqBE;AAAI,YAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,kBArBF,eAsBE;AAAK,YAAA,SAAS,EAAC,8BAAf;AAAA,oCACE;AAAA,qCACWkB,OAAO,CAACC,GAAR,CAAYC,iBADvB,EAEG,KAFH,EAGG,IAAIC,IAAJ,CAASC,MAAM,CAACJ,OAAO,CAACC,GAAR,CAAYI,oBAAb,CAAf,EAAmDC,kBAAnD,EAHH;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAME;AAAA,qCACW,KAAK9B,KAAL,CAAWE,aADtB,EAEG,KAFH,EAGG,KAAKF,KAAL,CAAWG,WAHd;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAtBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAgDG,KAAKH,KAAL,CAAWC,WAAX,gBACC,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE;AAAV,SAAf;AAA0C,QAAA,KAAK,EAAC,OAAhD;AAAwD,QAAA,OAAO,EAAE,KAAK3B,gBAAtE;AAAA,kBACGY,IAAI,CAACR,IAAL,CAAUwB,SAAV,CAAoBC;AADvB;AAAA;AAAA;AAAA;AAAA,cADD,GAIG,IApDN;AAAA,oBADF;AAwDD;;AA1E8B;;AA6EjC,eAAerC,OAAO,CACnBI,KAAD,IAAWA,KAAK,CAACkC,KADG,EAEnBC,QAAD,KAAe;AAAEZ,EAAAA,MAAM,EAAE,MAAMY,QAAQ,CAACxC,OAAO,CAAC4B,MAAR,EAAD;AAAxB,CAAf,CAFoB,CAAP,CAGbxB,QAHa,CAAf","sourcesContent":["///////////////////////////////////////////////////////////////////////////////\n// Copyright (C) 2002-2021, Open Design Alliance (the \"Alliance\").\n// All rights reserved.\n//\n// This software and its documentation and related materials are owned by\n// the Alliance. The software may only be incorporated into application\n// programs owned by members of the Alliance, subject to a signed\n// Membership Agreement and Supplemental Software License Agreement with the\n// Alliance. The structure and organization of this software are the valuable\n// trade secrets of the Alliance and its suppliers. The software is also\n// protected by copyright law and international treaty provisions. Application\n// programs incorporating this software must include the following statement\n// with their copyright notices:\n//\n//   This application incorporates Open Design Alliance software pursuant to a\n//   license agreement with Open Design Alliance.\n//   Open Design Alliance Copyright (C) 2002-2021 by Open Design Alliance.\n//   All rights reserved.\n//\n// By use of this software, its documentation or related materials, you\n// acknowledge and accept the above terms.\n///////////////////////////////////////////////////////////////////////////////\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { actions } from \"../redux/login\";\nimport { connect } from \"react-redux\";\nimport Window from \"../components/Window\";\n\nimport ClientFactory from \"./../ClientFactory\";\n\nclass UserMenu extends Component {\n  state = {\n    tokenWindow: false,\n    serverVersion: null,\n    serverBuild: null,\n  };\n\n  closeTokenWindow = () => this.setState({ tokenWindow: false });\n  showTokenWindow = () => this.setState({ tokenWindow: true });\n\n  async componentDidMount() {\n    const data = await ClientFactory.get().version();\n    this.setState({ serverVersion: data.version, serverBuild: data.build });\n  }\n\n  render() {\n    console.log(\"this.props\", this.props, this.props.data, this.props.data.user);\n    const user = this.props.data;\n    return (\n      <>\n        <div className=\"dropleft\">\n          <div\n            className=\"cursor-pointer shadow-hover\"\n            data-toggle=\"dropdown\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n          >\n            <span className=\"material-icons\" style={{ fontSize: \"38px\" }}>\n              account_circle\n            </span>\n          </div>\n          <div\n            className=\"dropdown-menu\"\n            aria-labelledby=\"dropdownMenuButton\"\n            style={{\n              boxShadow: \"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)\",\n              borderRadius: \"5px\",\n              border: \"1px solid #eeefff\",\n            }}\n          >\n            <div className=\"user-name d-none d-sm-inline dropdown-item\">{user.name || user.email}</div>\n            <hr className=\"m-0\"></hr>\n            <div className=\"dropdown-item\" onClick={this.props.logout}>\n              <Link to=\"/\" className=\"text-dark\">\n                Logout\n              </Link>\n            </div>\n            <div className=\"dropdown-item\">\n              <div className=\"cursor-pointer\" onClick={this.showTokenWindow}>\n                Token\n              </div>\n            </div>\n            <hr className=\"m-0\"></hr>\n            <div className=\"dropdown-item text-secondary\">\n              <div>\n                Client: {process.env.REACT_APP_VERSION}\n                {\" - \"}\n                {new Date(Number(process.env.REACT_APP_BUILD_TIME)).toLocaleDateString()}\n              </div>\n              <div>\n                Server: {this.state.serverVersion}\n                {\" - \"}\n                {this.state.serverBuild}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.tokenWindow ? (\n          <Window style={{ height: \"min-content\" }} title=\"Token\" onClose={this.closeTokenWindow}>\n            {user.data.tokenInfo.token}\n          </Window>\n        ) : null}\n      </>\n    );\n  }\n}\n\nexport default connect(\n  (state) => state.login,\n  (dispatch) => ({ logout: () => dispatch(actions.logout()) })\n)(UserMenu);\n"]},"metadata":{},"sourceType":"module"}